/*! formstone v1.3.3 [core.js] 2017-04-18 | GPL-3.0 License | formstone.it */

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a){p.Plugins[a].initialized||(p.Plugins[a].methods._setup.call(document),p.Plugins[a].initialized=!0)}function c(a,b,c,d){var e,f={raw:{}};d=d||{};for(e in d)d.hasOwnProperty(e)&&("classes"===a?(f.raw[d[e]]=b+"-"+d[e],f[d[e]]="."+b+"-"+d[e]):(f.raw[e]=d[e],f[e]=d[e]+"."+b));for(e in c)c.hasOwnProperty(e)&&("classes"===a?(f.raw[e]=c[e].replace(/{ns}/g,b),f[e]=c[e].replace(/{ns}/g,"."+b)):(f.raw[e]=c[e].replace(/.{ns}/g,""),f[e]=c[e].replace(/{ns}/g,b)));return f}function d(){var a,b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},c=["transition","-webkit-transition"],d={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},e="transitionend",f="",g="",h=document.createElement("div");for(a in b)if(b.hasOwnProperty(a)&&a in h.style){e=b[a],p.support.transition=!0;break}s.transitionEnd=e+".{ns}";for(a in c)if(c.hasOwnProperty(a)&&c[a]in h.style){f=c[a];break}p.transition=f;for(a in d)if(d.hasOwnProperty(a)&&d[a]in h.style){p.support.transform=!0,g=d[a];break}p.transform=g}function e(){p.windowWidth=p.$window.width(),p.windowHeight=p.$window.height(),t=o.startTimer(t,u,f)}function f(){for(var a in p.ResizeHandlers)p.ResizeHandlers.hasOwnProperty(a)&&p.ResizeHandlers[a].callback.call(window,p.windowWidth,p.windowHeight)}function g(){if(p.support.raf){p.window.requestAnimationFrame(g);for(var a in p.RAFHandlers)p.RAFHandlers.hasOwnProperty(a)&&p.RAFHandlers[a].callback.call(window)}}function h(a,b){return parseInt(a.priority)-parseInt(b.priority)}var i,j,k,l="undefined"!=typeof window?window:this,m=l.document,n=function(){this.Version="1.3.3",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=l,this.$window=a(l),this.document=m,this.$document=a(m),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},o={killEvent:function(a,b){try{a.preventDefault(),a.stopPropagation(),b&&a.stopImmediatePropagation()}catch(a){}},killGesture:function(a){try{a.preventDefault()}catch(a){}},lockViewport:function(b){v[b]=!0,a.isEmptyObject(v)||w||(i.length?i.attr("content",k):i=a("head").append('<meta name="viewport" content="'+k+'">'),p.$body.on(s.gestureChange,o.killGesture).on(s.gestureStart,o.killGesture).on(s.gestureEnd,o.killGesture),w=!0)},unlockViewport:function(b){"undefined"!==a.type(v[b])&&delete v[b],a.isEmptyObject(v)&&w&&(i.length&&(j?i.attr("content",j):i.remove()),p.$body.off(s.gestureChange).off(s.gestureStart).off(s.gestureEnd),w=!1)},startTimer:function(a,b,c,d){return o.clearTimer(a),d?setInterval(c,b):setTimeout(c,b)},clearTimer:function(a,b){a&&(b?clearInterval(a):clearTimeout(a),a=null)},sortAsc:function(a,b){return parseInt(a,10)-parseInt(b,10)},sortDesc:function(a,b){return parseInt(b,10)-parseInt(a,10)},decodeEntities:function(a){var b=p.document.createElement("textarea");return b.innerHTML=a,b.value},parseQueryString:function(a){for(var b={},c=a.slice(a.indexOf("?")+1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[e[0]]=e[1]}return b}},p=new n,q=a.Deferred(),r={base:"{ns}",element:"{ns}-element"},s={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},t=null,u=20,v=[],w=!1;return n.prototype.NoConflict=function(){p.DontConflict=!0;for(var b in p.Plugins)p.Plugins.hasOwnProperty(b)&&(a[b]=p.Conflicts[b],a.fn[b]=p.Conflicts.fn[b])},n.prototype.Plugin=function(d,e){return p.Plugins[d]=function(b,d){function e(c){var e,f,h,i="object"===a.type(c),j=this,k=a();for(c=a.extend(!0,{},d.defaults||{},i?c:{}),f=0,h=j.length;f<h;f++)if(e=j.eq(f),!g(e)){var l="__"+d.guid++,m=d.classes.raw.base+l,o=e.data(b+"-options"),p=a.extend(!0,{$el:e,guid:l,rawGuid:m,dotGuid:"."+m},c,"object"===a.type(o)?o:{});e.addClass(d.classes.raw.element).data(n,p),d.methods._construct.apply(e,[p].concat(Array.prototype.slice.call(arguments,i?1:0))),k=k.add(e)}for(f=0,h=k.length;f<h;f++)e=k.eq(f),d.methods._postConstruct.apply(e,[g(e)]);return j}function f(a){d.functions.iterate.apply(this,[d.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(d.classes.raw.element).removeData(n)}function g(a){return a.data(n)}function i(b){if(this instanceof a){var c=d.methods[b];return"object"!==a.type(b)&&b?c&&0!==b.indexOf("_")?d.functions.iterate.apply(this,[c].concat(Array.prototype.slice.call(arguments,1))):this:e.apply(this,arguments)}}function j(b){var c=d.utilities[b]||d.utilities._initialize||!1;if(c)return c.apply(window,Array.prototype.slice.call(arguments,"object"===a.type(b)?0:1))}function k(b){d.defaults=a.extend(!0,d.defaults,b||{})}function l(b){for(var c=this,d=0,e=c.length;d<e;d++){var f=c.eq(d),h=g(f)||{};"undefined"!==a.type(h.$el)&&b.apply(f,[h].concat(Array.prototype.slice.call(arguments,1)))}return c}var m="fs-"+b,n="fs"+b.replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()});return d.initialized=!1,d.priority=d.priority||10,d.classes=c("classes",m,r,d.classes),d.events=c("events",b,s,d.events),d.functions=a.extend({getData:g,iterate:l},o,d.functions),d.methods=a.extend(!0,{_setup:a.noop,_construct:a.noop,_postConstruct:a.noop,_destruct:a.noop,_resize:!1,destroy:f},d.methods),d.utilities=a.extend(!0,{_initialize:!1,_delegate:!1,defaults:k},d.utilities),d.widget&&(p.Conflicts.fn[b]=a.fn[b],a.fn[n]=i,p.DontConflict||(a.fn[b]=a.fn[n])),p.Conflicts[b]=a[b],a[n]=d.utilities._delegate||j,p.DontConflict||(a[b]=a[n]),d.namespace=b,d.namespaceClean=n,d.guid=0,d.methods._resize&&(p.ResizeHandlers.push({namespace:b,priority:d.priority,callback:d.methods._resize}),p.ResizeHandlers.sort(h)),d.methods._raf&&(p.RAFHandlers.push({namespace:b,priority:d.priority,callback:d.methods._raf}),p.RAFHandlers.sort(h)),d}(d,e),q.then(function(){b(d)}),p.Plugins[d]},p.$window.on("resize.fs",e),e(),g(),a(function(){p.$body=a("body"),i=a('meta[name="viewport"]'),j=!!i.length&&i.attr("content"),k="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",q.resolve(),p.support.nativeMatchMedia=p.support.matchMedia&&!a("html").hasClass("no-matchmedia")}),s.clickTouchStart=s.click+" "+s.touchStart,d(),window.Formstone=p,p});

// upload.js

/*! formstone v1.3.3 [upload.js] 2017-04-18 | GPL-3.0 License | formstone.it */

!function(a){"function"==typeof define&&define.amd?define(["jquery","./core"],a):a(jQuery,Formstone)}(function(a,b){"use strict";function c(){var a=["mozSlice","webkitSlice","slice"];if(b.support.file){var c=!1;try{c=new File([""],"f")}catch(a){}if(!c)try{c=new Blob([""],{})}catch(a){}if(c)for(var d in a)if(a.hasOwnProperty(d)&&a[d]in c){E=a[d];break}}}function d(a){if(b.support.file){var c="";E||(a.chunked=!1),a.maxQueue&&(a.maxConcurrent=a.maxQueue),a.label!==!1&&(c+='<div class="'+A.target+'">',c+=a.label,c+="</div>"),c+='<input class="'+A.input+'" type="file"',a.multiple&&(c+=" multiple"),a.accept&&(c+=' accept="'+a.accept+'"'),c+=">",a.baseClasses=[A.base,a.theme,a.customClass].join(" "),this.addClass(a.baseClasses).append(c),a.$input=this.find(z.input),a.queue=[],a.total=0,a.uploaded=0,a.uploading=!1,a.disabled=!0,a.aborting=!1,this.on(B.click,z.target,a,k).on(B.dragEnter,a,o).on(B.dragOver,a,p).on(B.dragLeave,a,q).on(B.drop,a,r),a.$input.on(B.focus,a,l).on(B.blur,a,m).on(B.change,a,n),j.call(this,a)}}function e(a){b.support.file&&(a.$input.off(B.namespace),this.off(B.namespace).removeClass(a.baseClasses).html(""))}function f(b,c){var d;b.aborting=!0;for(var e in b.queue)b.queue.hasOwnProperty(e)&&(d=b.queue[e],("undefined"===a.type(c)||c>=0&&d.index===c)&&(d.started&&!d.complete?b.chunked?d.chunkTransfer.abort():d.transfer.abort():g(b,d,"abort")));b.aborting=!1,u(b)}function g(a,b,c){b.error=!0,a.$el.trigger(B.fileError,[b,c]),a.aborting||u(a)}function h(a,b,c){a.$el.trigger(B.chunkError,[b,c]),g(a,b,c)}function i(a){a.disabled||(this.addClass(A.disabled),a.$input.prop("disabled",!0),a.disabled=!0)}function j(a){a.disabled&&(this.removeClass(A.disabled),a.$input.prop("disabled",!1),a.disabled=!1)}function k(a){C.killEvent(a);var b=a.data;b.disabled||b.$input.trigger(B.click)}function l(a){a.data.$el.addClass(A.focus)}function m(a){a.data.$el.removeClass(A.focus)}function n(a){C.killEvent(a);var b=a.data,c=b.$input[0].files;!b.disabled&&c.length&&s(b,c)}function o(a){C.killEvent(a);var b=a.data;b.$el.addClass(A.dropping).trigger(B.fileDragEnter)}function p(a){C.killEvent(a);var b=a.data;b.$el.addClass(A.dropping).trigger(B.fileDragOver)}function q(a){C.killEvent(a);var b=a.data;b.$el.removeClass(A.dropping).trigger(B.fileDragLeave)}function r(a){C.killEvent(a);var b=a.data,c=a.originalEvent.dataTransfer.files;b.$el.removeClass(A.dropping),b.disabled||s(b,c)}function s(a,b){var c=[],d=b.length;if(a.maxFiles){var e=a.maxFiles-a.uploaded;e>=0&&b.length>e&&(d=e)}if(d>0){for(var f=0;f<d;f++){var g={index:a.total++,file:b[f],name:b[f].name,size:b[f].size,started:!1,complete:!1,error:!1,transfer:null};c.push(g),a.queue.push(g)}a.$el.trigger(B.queued,[c]),a.autoUpload&&t(a)}a.$input.val("")}function t(a){a.uploading||(D.on(B.beforeUnload,function(){return a.leave}),a.uploading=!0,a.$el.trigger(B.start,[a.queue])),u(a)}function u(a){var b=0,c=[];for(var d in a.queue)!a.queue.hasOwnProperty(d)||a.queue[d].complete||a.queue[d].error||c.push(a.queue[d]);a.queue=c;for(var e in a.queue)if(a.queue.hasOwnProperty(e)){if(a.queue[e].started||v(a,a.queue[e]),b++,b>=a.maxConcurrent)return;d++}0===b&&(D.off(B.beforeUnload),a.uploading=!1,a.$el.trigger(B.complete))}function v(b,c){if(c.size>=b.maxSize||c.error===!0)g(b,c,"size");else if(b.chunked)c.started=!0,c.chunkSize=1024*b.chunkSize,c.totalChunks=Math.ceil(c.size/c.chunkSize),c.currentChunk=0,b.$el.trigger(B.fileStart,[c]),w(b,c);else{var d=new FormData;d.append(b.postKey,c.file),d=x(b,d,c),d===!1?g(b,c,"abort"):(c.started=!0,c.transfer=a.ajax({url:b.action,data:d,dataType:b.dataType,type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){var d=a.ajaxSettings.xhr();return d.upload&&d.upload.addEventListener("progress",function(a){var d=0,e=a.loaded||a.position,f=a.total;a.lengthComputable&&(d=Math.ceil(e/f*100)),b.$el.trigger(B.fileProgress,[c,d])},!1),d},beforeSend:function(a,d){b.$el.trigger(B.fileStart,[c])},success:function(a,d,e){c.complete=!0,b.uploaded++,b.$el.trigger(B.fileComplete,[c,a]),u(b)},error:function(a,d,e){g(b,c,e)}}))}}function w(b,c){var d=c.chunkSize*c.currentChunk,e=d+c.chunkSize;e>c.size&&(e=c.size);var f=c.file[E](d,e),i=new FormData;i.append(b.postKey,f,c.file.name),i.append("chunks",c.totalChunks),i.append("chunk",c.currentChunk),i=x(b,i,c),i===!1?g(b,c,"abort"):c.chunkTransfer=a.ajax({url:b.action,data:i,dataType:b.dataType,type:"POST",contentType:!1,processData:!1,cache:!1,beforeSend:function(a,d){b.$el.trigger(B.chunkStart,[c])},success:function(a,d,e){c.currentChunk++,b.$el.trigger(B.chunkComplete,[c]);var f=Math.ceil(c.currentChunk/c.totalChunks*100);b.$el.trigger(B.fileProgress,[c,f]),c.currentChunk<c.totalChunks?w(b,c):(c.complete=!0,b.$el.trigger(B.fileComplete,[c,a]),u(b))},error:function(a,d,e){h(b,c,e)}})}function x(a,b,c){for(var d in a.postData)a.postData.hasOwnProperty(d)&&b.append(d,a.postData[d]);return b=a.beforeSend.call(a.$el,b,c)}var y=b.Plugin("upload",{widget:!0,defaults:{accept:!1,action:"",autoUpload:!0,beforeSend:function(a){return a},chunked:!1,chunkSize:100,customClass:"",dataType:"html",label:"Drag and drop files or click to select",leave:"You have uploads pending, are you sure you want to leave this page?",maxConcurrent:2,maxFiles:!1,maxSize:5242880,multiple:!0,postData:{},postKey:"file",theme:"fs-light"},classes:["input","target","multiple","dropping","disabled","focus"],methods:{_setup:c,_construct:d,_destruct:e,disable:i,enable:j,abort:f,start:t}}),z=y.classes,A=z.raw,B=y.events,C=y.functions,D=(b.window,b.$window),E=!1;B.chunkComplete="chunkcomplete",B.chunkError="chunkerror",B.chunkStart="chunkstart",B.complete="complete",B.fileComplete="filecomplete",B.fileDragEnter="filedragenter",B.fileDragLeave="filedragleave",B.fileDragOver="filedragover",B.fileError="fileerror",B.fileProgress="fileprogress",B.fileStart="filestart",B.start="start",B.queued="queued"});
