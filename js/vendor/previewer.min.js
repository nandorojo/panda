/*!
 * Previewer v0.1.0
 * https://github.com/fengyuanchen/previewer
 *
 * Copyright (c) 2014-2015 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2015-07-03T15:30:53.998Z
 */
!function(e){"function"==typeof define&&define.amd?define("previewer",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(t){var i=[];return e.each(t,function(e,t){i.push([e,t].join("="))}),"?"+i.join("&")}function i(t){var i={};return t&&(t=t.replace("?","").toLowerCase().split("&"),e.each(t,function(e,t){t=t.split("="),e=t[0],i[e]=t[1]})),i}function r(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function n(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,e.isPlainObject(i)&&i),this.active=!1,this.init()}var a=window.location,s="previewer",o="click."+s,p="load."+s;n.prototype={constructor:n,init:function(){var t,r,o,p=this.options;this.params=t=i(a.search),t.hasOwnProperty(s)&&(o=!0,r=t[s],-1!==e.inArray(r,n.TYPES)&&(p.type=r)),(o||p.show)&&this.show()},show:function(){var t,i=this.options;this.active||(this.active=!0,this.$previewer=t=e(n.TEMPLATE),t.find('[data-preview="'+i.type+'"]').addClass("active"),t.find(".previewer-sidebar").one(o,e.proxy(this.click,this)).next().find("iframe").one(p,e.proxy(this.load,this)).width(i[i.type]).attr("src",r(a.href)),this.$element.addClass("previewer-open").prepend(t))},click:function(i){var r=e(i.target),n=r.data(),o=this.params;n.dismiss?this.hide():(n.preview||(n=r.parent().data()),n&&n.preview&&(o[s]=n.preview,a.search=t(o)))},load:function(t){var i=e(t.target);i.height(i.contents().find("body").outerHeight())},hide:function(){var e=this.params;delete e[s],a.search=t(e)},destroy:function(){this.hide()}},n.DEFAULTS={show:!1,type:"phone",phone:480,tablet:768,laptop:992,desktop:1200},n.TYPES=["phone","tablet","laptop","desktop"],n.setDefaults=function(t){e.extend(n.DEFAULTS,t)},n.TEMPLATE='<div class="previewer-container"><div class="previewer-sidebar"><button data-dismiss="previewer" title="Close">&times;</button><ul class="previewer-nav"><li><a data-preview="phone" title="Phone"><i></i></a></li><li><a data-preview="tablet" title="Tablet"><i></i></a></li><li><a data-preview="laptop" title="Laptop"><i></i></a></li><li><a data-preview="desktop" title="Desktop"><i></i></a></li></ul></div><div class="previewer-mainbody"><iframe scrolling="no"></iframe></div></div>',n.other=e.fn.previewer,e.fn.previewer=function(t){return this.each(function(){var i,r=e(this),a=r.data(s);if(!a){if(window.parent!==window.self)return;r.data(s,a=new n(this,t))}"string"==typeof t&&e.isFunction(i=a[t])&&i.call(a)})},e.fn.previewer.Constructor=n,e.fn.previewer.setDefaults=n.setDefaults,e.fn.previewer.noConflict=function(){return e.fn.previewer=n.other,this},e(function(){/\?.*\bpreviewer\b/.test(a.search)&&e("body").previewer()})});